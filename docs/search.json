[
  {
    "objectID": "sector.html",
    "href": "sector.html",
    "title": "SECTOR ANALYTICS | SPAIN",
    "section": "",
    "text": "&lt;div class=\"flex space-x-4 mb-8 p-4 bg-slate-800/50 rounded-lg\"&gt;\n    &lt;button onclick=\"switchTab('dashboard')\" id=\"btn-dashboard\" class=\"tab-active px-4 py-2 rounded text-sm font-bold transition-all flex items-center gap-2\"&gt;\n        &lt;i class=\"fa-solid fa-chart-column\"&gt;&lt;/i&gt; MERCADO GLOBAL\n    &lt;/button&gt;\n    &lt;button onclick=\"switchTab('comparator')\" id=\"btn-comparator\" class=\"tab-inactive px-4 py-2 rounded text-sm font-bold transition-all flex items-center gap-2\"&gt;\n        &lt;i class=\"fa-solid fa-chart-line\"&gt;&lt;/i&gt; COMPARADOR COMPETITIVO\n    &lt;/button&gt;\n    &lt;button onclick=\"switchTab('data')\" id=\"btn-data\" class=\"hidden px-4 py-2 rounded text-sm font-bold transition-all flex items-center gap-2\"&gt;\n        &lt;i class=\"fa-solid fa-database\"&gt;&lt;/i&gt; BBDD\n    &lt;/button&gt;\n&lt;/div&gt;\n\n&lt;main class=\"max-w-full mx-auto\"&gt;\n    \n    &lt;div id=\"view-dashboard\" class=\"fade-in\"&gt;\n        &lt;div class=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\"&gt;\n            &lt;div class=\"card p-6 bg-gradient-to-br\"&gt;\n                &lt;p class=\"text-slate-400 text-xs font-bold uppercase mb-1\"&gt;Sujetos Obligados&lt;/p&gt;\n                &lt;h3 class=\"text-4xl font-bold\" id=\"kpi-total-companies\"&gt;0&lt;/h3&gt;\n                &lt;div class=\"mt-4 flex items-center text-emerald-400 text-xs font-bold\"&gt;\n                    &lt;i class=\"fa-solid fa-check-circle mr-2\"&gt;&lt;/i&gt; Base de datos CNMC activa\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"card p-6\"&gt;\n                &lt;p class=\"text-slate-400 text-xs font-bold uppercase mb-1\"&gt;Volumen Total 2024&lt;/p&gt;\n                &lt;h3 class=\"text-2xl font-bold text-slate-800\" id=\"kpi-total-sales\"&gt;0 GWh&lt;/h3&gt;\n                &lt;p class=\"text-xs text-slate-500 mt-2\"&gt;Energ√≠a vendida agregada&lt;/p&gt;\n            &lt;/div&gt;\n            &lt;div class=\"card p-6\"&gt;\n                &lt;p class=\"text-slate-400 text-xs font-bold uppercase mb-1\"&gt;Coste FNEE Est. (2024)&lt;/p&gt;\n                &lt;h3 class=\"text-2xl font-bold text-blue-600\" id=\"kpi-total-cost\"&gt;0 M‚Ç¨&lt;/h3&gt;\n                &lt;p class=\"text-xs text-slate-500 mt-2\"&gt;Impacto regulatorio estimado&lt;/p&gt;\n            &lt;/div&gt;\n            &lt;div class=\"card p-6\"&gt;\n                &lt;p class=\"text-slate-400 text-xs font-bold uppercase mb-1\"&gt;Top Crecimiento '24&lt;/p&gt;\n                &lt;h3 class=\"text-lg font-bold text-slate-800 truncate\" id=\"kpi-top-grower-name\"&gt;-&lt;/h3&gt;\n                &lt;p class=\"text-emerald-600 font-bold mt-1\" id=\"kpi-top-grower-val\"&gt;+0 GWh&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\"&gt;\n            &lt;div class=\"card lg:col-span-2 overflow-hidden flex flex-col h-[700px]\"&gt;\n                &lt;div class=\"p-4 border-b border-slate-100 flex justify-between items-center\"&gt;\n                    &lt;h3 class=\"font-bold text-slate-700\"&gt;&lt;i class=\"fa-solid fa-list mr-2\"&gt;&lt;/i&gt; Ranking de Comercializadoras&lt;/h3&gt;\n                    &lt;div class=\"relative\"&gt;\n                        &lt;i class=\"fa-solid fa-search absolute left-3 top-3 text-slate-400 text-xs\"&gt;&lt;/i&gt;\n                        &lt;input type=\"text\" id=\"search-input\" placeholder=\"Buscar CIF o Nombre...\" \n                            class=\"pl-8 pr-4 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none w-64\"\n                            onkeyup=\"filterTable()\"&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"overflow-auto flex-1\"&gt;\n                    &lt;table class=\"w-full text-sm text-left\"&gt;\n                        &lt;thead class=\"text-xs text-slate-500 uppercase bg-slate-100 sticky top-0 z-10\"&gt;\n                            &lt;tr&gt;\n                                &lt;th class=\"px-6 py-3 cursor-pointer\" onclick=\"sortTable('cif')\"&gt;CIF&lt;/th&gt;\n                                &lt;th class=\"px-6 py-3 cursor-pointer\" onclick=\"sortTable('name')\"&gt;Raz√≥n Social&lt;/th&gt;\n                                &lt;th class=\"px-6 py-3 text-right cursor-pointer\" onclick=\"sortTable('sales2024')\"&gt;Ventas '24 (GWh)&lt;/th&gt;\n                                &lt;th class=\"px-6 py-3 text-right\"&gt;Trend ('23-'24)&lt;/th&gt;\n                                &lt;th class=\"px-6 py-3 text-center\"&gt;An√°lisis&lt;/th&gt;\n                            &lt;/tr&gt;\n                        &lt;/thead&gt;\n                        &lt;tbody id=\"companies-table-body\" class=\"divide-y divide-slate-100\"&gt;\n                            &lt;/tbody&gt;\n                    &lt;/table&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"card p-6 flex flex-col\"&gt;\n                &lt;h3 class=\"font-bold text-slate-700 mb-4 text-sm\"&gt;Evoluci√≥n Volumen Total (GWh)&lt;/h3&gt;\n                &lt;div class=\"flex-1 relative min-h-[300px]\"&gt;\n                    &lt;canvas id=\"marketChart\"&gt;&lt;/canvas&gt;\n                &lt;/div&gt;\n                &lt;div class=\"mt-4 p-3 bg-blue-50 rounded text-xs text-blue-800\"&gt;\n                    &lt;i class=\"fa-solid fa-chart-area mr-2\"&gt;&lt;/i&gt; Tendencia agregada del mercado nacional seg√∫n declaraciones a CNMC.\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div id=\"view-comparator\" class=\"hidden fade-in\"&gt;\n        &lt;div class=\"grid grid-cols-1 lg:grid-cols-4 gap-6 h-[80vh]\"&gt;\n            &lt;div class=\"lg:col-span-1 flex flex-col gap-4\"&gt;\n                &lt;div class=\"card p-5\"&gt;\n                    &lt;h3 class=\"font-bold text-slate-800 mb-4 text-sm uppercase\"&gt;1. Selecci√≥n de Competidores&lt;/h3&gt;\n                    &lt;div class=\"relative mb-2\"&gt;\n                        &lt;input type=\"text\" id=\"comp-search\" placeholder=\"Escribe nombre o CIF...\" \n                            class=\"w-full px-4 py-2 border border-slate-300 rounded-lg text-sm outline-none focus:border-blue-500\"\n                            onkeyup=\"searchCompetitor()\"&gt;\n                        &lt;div id=\"comp-results\" class=\"hidden absolute z-20 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-48 overflow-y-auto\"&gt;&lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div id=\"selected-comps\" class=\"space-y-2 mt-4 min-h-[100px]\"&gt;\n                        &lt;p class=\"text-xs text-slate-400 italic text-center mt-4\"&gt;Selecciona hasta 5 empresas para comparar.&lt;/p&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                \n                &lt;div class=\"card p-5\"&gt;\n                    &lt;h3 class=\"font-bold text-slate-800 mb-4 text-sm uppercase\"&gt;2. M√©trica de An√°lisis&lt;/h3&gt;\n                    &lt;button onclick=\"setChartMode('absolute')\" class=\"w-full text-left px-4 py-3 rounded mb-2 text-sm font-medium transition-colors tab-active\" id=\"mode-abs\"&gt;\n                        &lt;i class=\"fa-solid fa-chart-bar mr-2\"&gt;&lt;/i&gt; Volumen Absoluto (GWh)\n                    &lt;/button&gt;\n                    &lt;button onclick=\"setChartMode('indexed')\" class=\"w-full text-left px-4 py-3 rounded text-sm font-medium transition-colors tab-inactive\" id=\"mode-idx\"&gt;\n                        &lt;i class=\"fa-solid fa-arrow-trend-up mr-2\"&gt;&lt;/i&gt; Base 100 (Crecimiento Relativo)\n                    &lt;/button&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"lg:col-span-3 card p-6 flex flex-col\"&gt;\n                &lt;h3 class=\"font-bold text-slate-700 mb-2\"&gt;Comparativa Estrat√©gica de Cuotas&lt;/h3&gt;\n                &lt;div class=\"flex-1 relative min-h-[400px]\"&gt;\n                    &lt;canvas id=\"comparatorChart\"&gt;&lt;/canvas&gt;\n                &lt;/div&gt;\n                &lt;div class=\"mt-4 overflow-x-auto\"&gt;\n                    &lt;table class=\"w-full text-sm text-left\" id=\"comp-table\"&gt;\n                        &lt;thead class=\"bg-slate-50 text-slate-500 uppercase text-xs\"&gt;\n                            &lt;tr&gt;\n                                &lt;th class=\"px-4 py-2\"&gt;Empresa&lt;/th&gt;\n                                &lt;th class=\"px-4 py-2 text-right\"&gt;2020 (GWh)&lt;/th&gt;\n                                &lt;th class=\"px-4 py-2 text-right\"&gt;2024 (GWh)&lt;/th&gt;\n                                &lt;th class=\"px-4 py-2 text-right\"&gt;CAGR (4y)&lt;/th&gt;\n                                &lt;th class=\"px-4 py-2 text-right\"&gt;Crecimiento Total&lt;/th&gt;\n                            &lt;/tr&gt;\n                        &lt;/thead&gt;\n                        &lt;tbody id=\"comp-table-body\"&gt;&lt;/tbody&gt;\n                    &lt;/table&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    \n    &lt;div id=\"view-data\" class=\"hidden\"&gt;&lt;/div&gt;\n\n&lt;/main&gt;\n\n&lt;div id=\"modal\" class=\"fixed inset-0 bg-slate-900/80 z-[100] hidden flex items-center justify-center p-4 backdrop-blur-sm\"&gt;\n    &lt;div class=\"bg-white rounded-xl shadow-2xl w-full max-w-4xl overflow-hidden animate-in fade-in zoom-in duration-200\"&gt;\n        &lt;div class=\"bg-slate-900 p-6 flex justify-between items-start text-white\"&gt;\n            &lt;div&gt;\n                &lt;span class=\"bg-white/10 text-xs px-2 py-1 rounded font-mono\" id=\"modal-cif\"&gt;CIF&lt;/span&gt;\n                &lt;h2 class=\"text-2xl font-bold mt-2\" id=\"modal-name\"&gt;Nombre Empresa&lt;/h2&gt;\n            &lt;/div&gt;\n            &lt;button onclick=\"closeModal()\" class=\"text-slate-400 hover:text-white\"&gt;&lt;i class=\"fa-solid fa-times text-xl\"&gt;&lt;/i&gt;&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;div class=\"p-6\"&gt;\n            &lt;div class=\"grid grid-cols-4 gap-4 mb-6\"&gt;\n                &lt;div class=\"p-4 bg-slate-50 rounded border border-slate-100\"&gt;\n                    &lt;p class=\"text-xs text-slate-500\"&gt;Ventas 2024&lt;/p&gt;\n                    &lt;p class=\"text-xl font-bold\" id=\"modal-sales-24\"&gt;0&lt;/p&gt;\n                &lt;/div&gt;\n                &lt;div class=\"p-4 bg-slate-50 rounded border border-slate-100\"&gt;\n                    &lt;p class=\"text-xs text-slate-500\"&gt;Crecimiento ('20-'24)&lt;/p&gt;\n                    &lt;p class=\"text-xl font-bold\" id=\"modal-growth\"&gt;0%&lt;/p&gt;\n                &lt;/div&gt;\n                &lt;div class=\"p-4 bg-slate-50 rounded border border-slate-100\"&gt;\n                    &lt;p class=\"text-xs text-slate-500\"&gt;CAGR&lt;/p&gt;\n                    &lt;p class=\"text-xl font-bold text-blue-600\" id=\"modal-cagr\"&gt;0%&lt;/p&gt;\n                &lt;/div&gt;\n                &lt;div class=\"p-4 bg-slate-50 rounded border border-slate-100\"&gt;\n                    &lt;p class=\"text-xs text-slate-500\"&gt;Coste Est. FNEE&lt;/p&gt;\n                    &lt;p class=\"text-xl font-bold text-slate-800\" id=\"modal-cost\"&gt;0‚Ç¨&lt;/p&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"h-80\"&gt;\n                &lt;canvas id=\"modalChart\"&gt;&lt;/canvas&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;script src=\"[https://cdn.jsdelivr.net/npm/chart.js](https://cdn.jsdelivr.net/npm/chart.js)\"&gt;&lt;/script&gt;\n&lt;link href=\"[https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css](https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css)\" rel=\"stylesheet\"&gt;\n\n&lt;script&gt;\n    // --- 1. DATOS PRECARGADOS (MUESTRA ESTRAT√âGICA) ---\n    let DB = [\n        { cif: \"A81948077\", name: \"ENDESA ENERG√çA S.A.U.\", sales: { 2019: 96136, 2020: 85210, 2021: 75390, 2022: 78328, 2023: 75390, 2024: 68500 } },\n        { cif: \"A80298896\", name: \"CEPSA COMERCIAL PETROLEO, S.A.U.\", sales: { 2019: 87767, 2020: 71631, 2021: 71796, 2022: 75500, 2023: 74000, 2024: 73200 } },\n        { cif: \"A95758389\", name: \"IBERDROLA CLIENTES, S.A.U.\", sales: { 2019: 56083, 2020: 51557, 2021: 51557, 2022: 42000, 2023: 39293, 2024: 46500 } },\n        { cif: \"A61797536\", name: \"GAS NATURAL COMERCIALIZADORA (NATURGY)\", sales: { 2019: 42699, 2020: 30751, 2021: 23978, 2022: 22388, 2023: 21500, 2024: 20100 } },\n        { cif: \"A28559573\", name: \"GALP ENERG√çA ESPA√ëA, S.A.U.\", sales: { 2019: 36467, 2020: 23744, 2021: 22253, 2022: 24500, 2023: 25100, 2024: 26000 } },\n        { cif: \"A80298839\", name: \"REPSOL PRODUCTOS PETROLIFEROS, S.A.\", sales: { 2019: 11748, 2020: 119846, 2021: 194426, 2022: 185000, 2023: 175000, 2024: 170000 } },\n        { cif: \"A28135846\", name: \"BP OIL ESPA√ëA, S.A.U.\", sales: { 2019: 41080, 2020: 34795, 2021: 39293, 2022: 38000, 2023: 37500, 2024: 36000 } },\n        { cif: \"B82846825\", name: \"ENERGIA XXI (ENDESA REF)\", sales: { 2019: 13261, 2020: 12968, 2021: 12673, 2022: 12673, 2023: 12400, 2024: 12300 } },\n        { cif: \"A95000295\", name: \"TOTALENERGIES CLIENTES, S.A.U.\", sales: { 2019: 13310, 2020: 14518, 2021: 23543, 2022: 23543, 2023: 25000, 2024: 26500 } },\n        { cif: \"A62338827\", name: \"AUDAX RENOVABLES, S.A.\", sales: { 2019: 1677, 2020: 1675, 2021: 1725, 2022: 1800, 2023: 1950, 2024: 2100 } },\n        { cif: \"B85228138\", name: \"FORTIA ENERGIA S.L.\", sales: { 2019: 7629, 2020: 5763, 2021: 4722, 2022: 5100, 2023: 5300, 2024: 5500 } },\n        { cif: \"B31737422\", name: \"ACCIONA GREEN ENERGY\", sales: { 2019: 5654, 2020: 4992, 2021: 6349, 2022: 6500, 2023: 6700, 2024: 6900 } },\n        { cif: \"B83160994\", name: \"AXPO IBERIA S.L.\", sales: { 2019: 7404, 2020: 14727, 2021: 12969, 2022: 14727, 2023: 10500, 2024: 10000 } },\n        { cif: \"A85908036\", name: \"FENIE ENERGIA, S.A.\", sales: { 2019: 3949, 2020: 2476, 2021: 2127, 2022: 2127, 2023: 2000, 2024: 1950 } },\n        { cif: \"B88181441\", name: \"ELECTRICIDAD ELEIA S.L.\", sales: { 2019: 2.9, 2020: 204, 2021: 204, 2022: 473, 2023: 500, 2024: 550 } },\n        { cif: \"B98670003\", name: \"ENERG√çA COLECTIVA, S.L.\", sales: { 2019: 97, 2020: 180, 2021: 264, 2022: 264, 2023: 350, 2024: 380 } }\n    ];\n\n    const YEARS = [2019, 2020, 2021, 2022, 2023, 2024];\n    let marketChartInstance = null;\n    let comparatorChartInstance = null;\n    let modalChartInstance = null;\n    let selectedCompetitors = [];\n    let comparatorMode = 'absolute';\n\n    // --- 2. FUNCIONES DE FORMATO ---\n    const fmtNum = (n) =&gt; new Intl.NumberFormat('es-ES', { maximumFractionDigits: 0 }).format(n);\n    const fmtEur = (n) =&gt; new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR', maximumFractionDigits: 0 }).format(n);\n    const calcCAGR = (start, end, periods) =&gt; (start &gt; 0 && periods &gt; 0) ? ((Math.pow(end / start, 1 / periods) - 1) * 100).toFixed(2) : 0;\n\n    // --- 3. INICIALIZACI√ìN Y NAVEGACI√ìN ---\n    function switchTab(tabId) {\n        if(tabId === 'data') return; // Bloquear pesta√±a de datos\n        ['dashboard', 'comparator'].forEach(t =&gt; {\n            document.getElementById('view-' + t).classList.add('hidden');\n            document.getElementById('btn-' + t).className = 'tab-inactive px-4 py-2 rounded text-sm font-bold transition-all flex items-center gap-2 cursor-pointer';\n        });\n        document.getElementById('view-' + tabId).classList.remove('hidden');\n        document.getElementById('btn-' + tabId).className = 'tab-active px-4 py-2 rounded text-sm font-bold transition-all flex items-center gap-2 cursor-default';\n        \n        if(tabId === 'comparator') updateComparatorChart();\n    }\n\n    // --- 4. L√ìGICA DASHBOARD PRINCIPAL ---\n    function renderDashboard() {\n        let totalSales2024 = 0;\n        let totalSales2023 = 0;\n        let topGrower = { name: '-', growth: -Infinity };\n\n        DB.forEach(c =&gt; {\n            const s24 = c.sales[2024] || 0;\n            const s23 = c.sales[2023] || 0;\n            totalSales2024 += s24;\n            totalSales2023 += s23;\n            \n            const growth = s24 - s23;\n            if (growth &gt; topGrower.growth) topGrower = { name: c.name, growth: growth };\n        });\n\n        document.getElementById('kpi-total-companies').innerText = DB.length;\n        document.getElementById('kpi-total-sales').innerText = fmtNum(totalSales2024) + ' GWh';\n        document.getElementById('kpi-total-cost').innerText = fmtEur(totalSales2024 * 239000).slice(0,-2) + ' M‚Ç¨';\n        document.getElementById('kpi-top-grower-name').innerText = topGrower.name;\n        document.getElementById('kpi-top-grower-val').innerText = '+' + fmtNum(topGrower.growth) + ' GWh';\n\n        renderTable(DB);\n        renderMarketChart();\n    }\n\n    function renderTable(data) {\n        const tbody = document.getElementById('companies-table-body');\n        tbody.innerHTML = '';\n        const sorted = [...data].sort((a,b) =&gt; (b.sales[2024]||0) - (a.sales[2024]||0)).slice(0, 200);\n\n        sorted.forEach(c =&gt; {\n            const s24 = c.sales[2024] || 0;\n            const s23 = c.sales[2023] || 0;\n            const trend = s23 &gt; 0 ? ((s24 - s23)/s23 * 100).toFixed(1) : 0;\n            const trendColor = trend &gt;= 0 ? 'text-emerald-600' : 'text-rose-600';\n            \n            const row = `\n                &lt;tr class=\"hover:bg-blue-50 transition-colors border-b border-slate-100\"&gt;\n                    &lt;td class=\"px-6 py-3 font-mono text-xs text-slate-500\"&gt;${c.cif}&lt;/td&gt;\n                    &lt;td class=\"px-6 py-3 font-medium text-slate-700 truncate max-w-xs\" title=\"${c.name}\"&gt;${c.name}&lt;/td&gt;\n                    &lt;td class=\"px-6 py-3 text-right font-bold text-slate-800\"&gt;${fmtNum(s24)}&lt;/td&gt;\n                    &lt;td class=\"px-6 py-3 text-right font-bold text-xs ${trendColor}\"&gt;${trend &gt; 0 ? '+' : ''}${trend}%&lt;/td&gt;\n                    &lt;td class=\"px-6 py-3 text-center\"&gt;\n                        &lt;button onclick=\"openModal('${c.cif}')\" class=\"text-blue-600 hover:bg-blue-100 p-2 rounded transition\"&gt;\n                            &lt;i class=\"fa-solid fa-eye\"&gt;&lt;/i&gt;\n                        &lt;/button&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            `;\n            tbody.innerHTML += row;\n        });\n    }\n\n    function renderMarketChart() {\n        const ctx = document.getElementById('marketChart').getContext('2d');\n        const totals = YEARS.map(y =&gt; DB.reduce((sum, c) =&gt; sum + (c.sales[y]||0), 0));\n\n        if(marketChartInstance) marketChartInstance.destroy();\n\n        // Chart en modo oscuro\n        marketChartInstance = new Chart(ctx, {\n            type: 'bar',\n            data: {\n                labels: YEARS,\n                datasets: [{\n                    label: 'Volumen Total (GWh)',\n                    data: totals,\n                    backgroundColor: '#2dd4bf', // Teal\n                    borderRadius: 4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: { legend: { display: false } },\n                scales: { \n                    y: { \n                        beginAtZero: true, \n                        grid: { color: '#334155' }, // Grid oscuro\n                        ticks: { color: '#94a3b8' }\n                    }, \n                    x: { \n                        grid: { display: false },\n                        ticks: { color: '#94a3b8' }\n                    } \n                }\n            }\n        });\n    }\n\n    function filterTable() {\n        const term = document.getElementById('search-input').value.toLowerCase();\n        const filtered = DB.filter(c =&gt; c.name.toLowerCase().includes(term) || c.cif.toLowerCase().includes(term));\n        renderTable(filtered);\n    }\n\n    // --- 5. L√ìGICA COMPARADOR ---\n    function searchCompetitor() {\n        const term = document.getElementById('comp-search').value.toLowerCase();\n        const resultsDiv = document.getElementById('comp-results');\n        resultsDiv.innerHTML = '';\n        \n        if(term.length &lt; 2) { resultsDiv.classList.add('hidden'); return; }\n\n        const matches = DB.filter(c =&gt; c.name.toLowerCase().includes(term) && !selectedCompetitors.includes(c.cif)).slice(0, 10);\n        \n        if(matches.length &gt; 0) {\n            resultsDiv.classList.remove('hidden');\n            // Fondo oscuro para resultados\n            resultsDiv.classList.add('bg-slate-800', 'border-slate-700'); \n            matches.forEach(c =&gt; {\n                const div = document.createElement('div');\n                div.className = 'p-3 hover:bg-slate-700 cursor-pointer text-xs border-b border-slate-700 text-slate-200';\n                div.innerHTML = `&lt;strong&gt;${c.name}&lt;/strong&gt; &lt;span class=\"text-slate-400\"&gt;(${c.cif})&lt;/span&gt;`;\n                div.onclick = () =&gt; addCompetitor(c.cif);\n                resultsDiv.appendChild(div);\n            });\n        } else {\n            resultsDiv.classList.add('hidden');\n        }\n    }\n\n    function addCompetitor(cif) {\n        if(selectedCompetitors.length &gt;= 5) { alert(\"M√°ximo 5 competidores\"); return; }\n        selectedCompetitors.push(cif);\n        document.getElementById('comp-search').value = '';\n        document.getElementById('comp-results').classList.add('hidden');\n        renderSelectedChips();\n        updateComparatorChart();\n    }\n\n    function removeCompetitor(cif) {\n        selectedCompetitors = selectedCompetitors.filter(c =&gt; c !== cif);\n        renderSelectedChips();\n        updateComparatorChart();\n    }\n\n    function renderSelectedChips() {\n        const container = document.getElementById('selected-comps');\n        container.innerHTML = '';\n        const colors = ['#2dd4bf', '#f472b6', '#34d399', '#fbbf24', '#a78bfa']; // Paleta Neon\n        \n        selectedCompetitors.forEach((cif, idx) =&gt; {\n            const comp = DB.find(c =&gt; c.cif === cif);\n            const div = document.createElement('div');\n            div.className = 'flex items-center justify-between p-2 bg-slate-800 rounded border border-slate-700 text-xs text-slate-200';\n            div.innerHTML = `\n                &lt;div class=\"flex items-center gap-2 overflow-hidden\"&gt;\n                    &lt;div class=\"w-3 h-3 rounded-full flex-shrink-0\" style=\"background:${colors[idx]}\"&gt;&lt;/div&gt;\n                    &lt;span class=\"font-bold truncate\"&gt;${comp.name}&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;button onclick=\"removeCompetitor('${cif}')\" class=\"text-slate-400 hover:text-red-500\"&gt;&lt;i class=\"fa-solid fa-times\"&gt;&lt;/i&gt;&lt;/button&gt;\n            `;\n            container.appendChild(div);\n        });\n    }\n\n    function setChartMode(mode) {\n        comparatorMode = mode;\n        document.getElementById('mode-abs').className = mode === 'absolute' ? 'w-full text-left px-4 py-3 rounded mb-2 text-sm font-medium transition-colors tab-active' : 'w-full text-left px-4 py-3 rounded mb-2 text-sm font-medium transition-colors tab-inactive';\n        document.getElementById('mode-idx').className = mode === 'indexed' ? 'w-full text-left px-4 py-3 rounded text-sm font-medium transition-colors tab-active' : 'w-full text-left px-4 py-3 rounded text-sm font-medium transition-colors tab-inactive';\n        updateComparatorChart();\n    }\n\n    function updateComparatorChart() {\n        const ctx = document.getElementById('comparatorChart').getContext('2d');\n        const colors = ['#2dd4bf', '#f472b6', '#34d399', '#fbbf24', '#a78bfa'];\n        \n        const datasets = selectedCompetitors.map((cif, idx) =&gt; {\n            const comp = DB.find(c =&gt; c.cif === cif);\n            let data = YEARS.map(y =&gt; comp.sales[y] || 0);\n            \n            if (comparatorMode === 'indexed') {\n                const base = data[0] || 1; \n                data = data.map(v =&gt; (v/base)*100);\n            }\n\n            return {\n                label: comp.name,\n                data: data,\n                borderColor: colors[idx],\n                backgroundColor: colors[idx],\n                borderWidth: 2,\n                tension: 0.3,\n                pointRadius: 4\n            };\n        });\n\n        if(comparatorChartInstance) comparatorChartInstance.destroy();\n\n        comparatorChartInstance = new Chart(ctx, {\n            type: 'line',\n            data: { labels: YEARS, datasets: datasets },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                interaction: { mode: 'index', intersect: false },\n                scales: { \n                    y: { \n                        beginAtZero: false, \n                        grid: { color: '#334155' },\n                        ticks: { color: '#94a3b8' }\n                    }, \n                    x: { \n                        grid: { display: false },\n                        ticks: { color: '#94a3b8' }\n                    } \n                },\n                plugins: { legend: { labels: { color: '#e2e8f0' } } }\n            }\n        });\n\n        // Actualizar tabla comparativa (Estilo oscuro)\n        const tbody = document.getElementById('comp-table-body');\n        tbody.innerHTML = '';\n        selectedCompetitors.forEach(cif =&gt; {\n            const comp = DB.find(c =&gt; c.cif === cif);\n            const s20 = comp.sales[2020] || 0;\n            const s24 = comp.sales[2024] || 0;\n            const growth = s20 &gt; 0 ? ((s24 - s20)/s20 * 100).toFixed(1) : 0;\n            const cagr = calcCAGR(s20, s24, 4);\n            \n            const row = `\n                &lt;tr class=\"border-b border-slate-700\"&gt;\n                    &lt;td class=\"px-4 py-2 font-bold text-slate-200 truncate max-w-xs\"&gt;${comp.name}&lt;/td&gt;\n                    &lt;td class=\"px-4 py-2 text-right text-slate-400\"&gt;${fmtNum(s20)}&lt;/td&gt;\n                    &lt;td class=\"px-4 py-2 text-right font-bold text-slate-200\"&gt;${fmtNum(s24)}&lt;/td&gt;\n                    &lt;td class=\"px-4 py-2 text-right text-emerald-400 font-bold\"&gt;${cagr}%&lt;/td&gt;\n                    &lt;td class=\"px-4 py-2 text-right ${growth &gt;= 0 ? 'text-emerald-400' : 'text-rose-400'} font-bold\"&gt;${growth}%&lt;/td&gt;\n                &lt;/tr&gt;\n            `;\n            tbody.innerHTML += row;\n        });\n    }\n\n    // --- 6. MODAL DETALLE ---\n    function openModal(cif) {\n        const comp = DB.find(c =&gt; c.cif === cif);\n        if(!comp) return;\n\n        document.getElementById('modal').classList.remove('hidden');\n        document.getElementById('modal-cif').innerText = comp.cif;\n        document.getElementById('modal-name').innerText = comp.name;\n        \n        const s20 = comp.sales[2020] || 0;\n        const s24 = comp.sales[2024] || 0;\n        const growth = s20 &gt; 0 ? ((s24 - s20)/s20 * 100).toFixed(1) + '%' : '-';\n        const cagr = calcCAGR(s20, s24, 4) + '%';\n        \n        document.getElementById('modal-sales-24').innerText = fmtNum(s24);\n        document.getElementById('modal-growth').innerText = growth;\n        document.getElementById('modal-cagr').innerText = cagr;\n        document.getElementById('modal-cost').innerText = fmtEur(s24 * 239000);\n\n        const ctx = document.getElementById('modalChart').getContext('2d');\n        if(modalChartInstance) modalChartInstance.destroy();\n\n        modalChartInstance = new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: YEARS,\n                datasets: [{\n                    label: 'Ventas (GWh)',\n                    data: YEARS.map(y =&gt; comp.sales[y]||0),\n                    borderColor: '#2dd4bf',\n                    backgroundColor: 'rgba(45, 212, 191, 0.1)',\n                    fill: true,\n                    tension: 0.4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: { legend: { display: false } },\n                scales: { \n                    y: { beginAtZero: true, grid: { color: '#334155' }, ticks: { color: '#94a3b8' } },\n                    x: { grid: { display: false }, ticks: { color: '#94a3b8' } }\n                }\n            }\n        });\n    }\n\n    function closeModal() {\n        document.getElementById('modal').classList.add('hidden');\n    }\n\n    // Init\n    renderDashboard();\n&lt;/script&gt;"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "SAMUEL GAMITO",
    "section": "",
    "text": "‚ÄúTransformando la volatilidad del mercado en margen EBITDA mediante ingenier√≠a de datos.‚Äù\n\nSoy Licenciado en C.C. Matem√°ticas con M√°ster en Ingenier√≠a Matem√°tica y Ejecutivo C-Level especializado en mercados energ√©ticos internacionales (Espa√±a, Italia, Brasil, M√©xico‚Ä¶). Mi enfoque combina la rigurosidad del an√°lisis cuantitativo con la ejecuci√≥n operativa de alto nivel.\nActualmente liderando la expansi√≥n de Greening Group como CEO para el Sur de Europa.\n\n\n\n\n\n\nEstructuraci√≥n de PPAs, cobertura de riesgos financieros y optimizaci√≥n de carteras de energ√≠a (Power & Gas).\n\n\n\nExtracci√≥n masiva de datos (CNMC/REE), modelado predictivo y automatizaci√≥n de procesos de decisi√≥n.\n\n\n\nGesti√≥n de P&L en entornos regulatorios complejos. Liderazgo de equipos transfronterizos (Espa√±a-Italia).\n\n\n\nOptimizaci√≥n de RoI en activos de generaci√≥n renovable y estrategias de comercializaci√≥n B2B."
  },
  {
    "objectID": "index.html#energy-strategy-mathematics",
    "href": "index.html#energy-strategy-mathematics",
    "title": "SAMUEL GAMITO",
    "section": "",
    "text": "‚ÄúTransformando la volatilidad del mercado en margen EBITDA mediante ingenier√≠a de datos.‚Äù\n\nSoy Licenciado en C.C. Matem√°ticas con M√°ster en Ingenier√≠a Matem√°tica y Ejecutivo C-Level especializado en mercados energ√©ticos internacionales (Espa√±a, Italia, Brasil, M√©xico‚Ä¶). Mi enfoque combina la rigurosidad del an√°lisis cuantitativo con la ejecuci√≥n operativa de alto nivel.\nActualmente liderando la expansi√≥n de Greening Group como CEO para el Sur de Europa.\n\n\n\n\n\n\nEstructuraci√≥n de PPAs, cobertura de riesgos financieros y optimizaci√≥n de carteras de energ√≠a (Power & Gas).\n\n\n\nExtracci√≥n masiva de datos (CNMC/REE), modelado predictivo y automatizaci√≥n de procesos de decisi√≥n.\n\n\n\nGesti√≥n de P&L en entornos regulatorios complejos. Liderazgo de equipos transfronterizos (Espa√±a-Italia).\n\n\n\nOptimizaci√≥n de RoI en activos de generaci√≥n renovable y estrategias de comercializaci√≥n B2B."
  },
  {
    "objectID": "blog.html",
    "href": "blog.html",
    "title": "ENERGY FLASH",
    "section": "",
    "text": "AnÔøΩlisis mensual."
  },
  {
    "objectID": "blog.html#market-intelligence",
    "href": "blog.html#market-intelligence",
    "title": "ENERGY FLASH",
    "section": "",
    "text": "AnÔøΩlisis mensual."
  },
  {
    "objectID": "dashboards.html",
    "href": "dashboards.html",
    "title": "MARKET INTELLIGENCE",
    "section": "",
    "text": "Herramientas propias de an√°lisis regulatorio y visualizaci√≥n de datos en tiempo real.\n\n\n\n\n\nüó∫Ô∏è Expansi√≥n Territorial\n\n\nVisualizaci√≥n geoespacial de la cartera de clientes de Alumbra. An√°lisis de densidad de consumo y penetraci√≥n regional.\n\n ABRIR MAPA INTERACTIVO  \n\n\n\n\n\nüìä Benchmarking FNEE\n\n\nDashboard estrat√©gico basado en datos de la CNMC. Seguimiento de cuotas de mercado, altas/bajas y evoluci√≥n de competidores.\n\n ACCEDER AL DASHBOARD"
  },
  {
    "objectID": "posts/2026-01-welcome/index.html",
    "href": "posts/2026-01-welcome/index.html",
    "title": "Informe Enero 2026",
    "section": "",
    "text": "Sistema operativo."
  },
  {
    "objectID": "posts/2026-01-welcome/index.html#informe-mensual",
    "href": "posts/2026-01-welcome/index.html#informe-mensual",
    "title": "Informe Enero 2026",
    "section": "",
    "text": "Sistema operativo."
  }
]